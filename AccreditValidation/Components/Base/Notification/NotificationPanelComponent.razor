@using AccreditValidation.Shared.Services.Notification
@using System.Collections.ObjectModel

<div class="notification-panel-overlay" @onclick="ClosePanel">
    <div class="notification-panel-container" @onclick:stopPropagation="true">
        <!-- Header -->
        <div class="panel-header">
            <h3>Notifications</h3>
            <button class="close-btn" @onclick="ClosePanel">✕</button>
        </div>

        <!-- Notifications List -->
        <div class="notifications-list">
            @if (Notifications == null || Notifications.Count == 0)
            {
                <div class="empty-state">
                    <p>No notifications</p>
                </div>
            }
            else
            {
                @foreach (var notification in Notifications)
                {
                    <div class="notification-item @(notification.IsRead ? "read" : "unread")"
                         @onclick="() => OnNotificationTappedHandler(notification)">
                        
                        <div class="notification-icon-wrapper">
                            <div class="notification-icon" style="background-color: @GetTypeColor(notification.Type)">
                                <span>@GetTypeIcon(notification.Type)</span>
                            </div>
                        </div>

                        <div class="notification-content">
                            <div class="notification-title">@notification.Title</div>
                            <div class="notification-message">@notification.Message</div>
                            <div class="notification-time">@GetTimeAgo(notification.Timestamp)</div>
                        </div>
                    </div>
                }
            }
        </div>

        <!-- Footer Actions -->
        @if (Notifications != null && Notifications.Count > 0)
        {
            <div class="panel-footer">
                <button class="btn btn-outline-primary w-100" @onclick="OnMarkAllReadClicked">Mark All Read</button>
                <button class="btn btn-outline-danger w-100" @onclick="OnClearAllClicked">Clear All</button>
            </div>
        }
    </div>
</div>